<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>AI Upscaler</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    .guide {
      text-align: center;
      margin: 20px auto;
      max-width: 1000px;
    }

    .guide h2 {
      margin-bottom: 12px;
    }

    .guide-actions {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }

    .guide-card {
      background: var(--guide-bg);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 18px;
      width: 300px;

      cursor: pointer;
      transition: all .3s ease;
    }

    .guide-card span {
      color: var(--primary);
    }

    .guide-card p {
      color: var(--text-soft);
    }

    .guide-card:hover {
      box-shadow:
          0 0 0 1px var(--secondary),
          0 0 20px rgba(236,72,153,.25);

      transform: translateY(-2px);
    }

    .steps {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;

      margin-top: 12px;
    }

    .steps div {
      background: var(--card);
      border: 1px solid var(--border);
      padding: 8px 12px;
      border-radius: 10px;
      font-size: 13px;
    }

    @media (max-width: 1000px) {
    .guide-actions {
        flex-direction: column;
        align-items: center;
    }

    .guide-card {
       width: 92%;
    }
    }

    .app {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    input[type="file"] {
      text-align: center;
      margin: 10px auto;
    }

    a {
      display: flex;
      justify-content: center;
    }

    :root {
      --bg: #eef1fa;
      --card: #f9faff;
      --surface: #e4e9f7;

      --topbar: #dfe5f6;

      --text: #0f172a;
      --text-soft: #475569;

      --primary: #4f46e5;
      --secondary: #ec4899;
      --success: #16a34a;

      --border: #cfd7f0;

      --btn-bg: #4f46e5;
      --guide-bg: #e8ecfa;

      --accent: #4f46e5;
      --accent2: #818cf8;
    }

    .dark {
      --bg: #13182b;
      --card: #1a2036;
      --surface: #1f2640;

      --topbar: #0f1322;

      --text: #e6ebff;
      --text-soft: #94a3b8;

      --primary: #818cf8;
      --secondary: #f472b6;
      --success: #4ade80;

      --border: #252e4d;

      --btn-bg: #6366f1;
      --guide-bg: #1d2440;

      --accent: #818cf8;
      --accent2: #c084fc;
    }

    * { box-sizing: border-box; }

    body {
      font-family: 'Outfit', Arial;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      transition:
        background-color .4s ease,
        color .4s ease;
    }

    .top-bar {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;

      padding: 14px 24px;

      background: linear-gradient(
        135deg,
        var(--topbar),
        var(--surface)
      );

      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 999;

      backdrop-filter: blur(12px);

      box-shadow: 0 4px 16px rgba(0,0,0,.08);
    }

    .dark .top-bar {
      box-shadow: 0 4px 16px rgba(0,0,0,.25);
    }

    .top-spacer {
      height: 1px;
    }

    .nav-center {
      display: flex;
      gap: 14px;
      justify-content: center;
    }

    .nav-btn {
      background: transparent;
      color: var(--text);

      border: 1px solid var(--border);
      border-radius: 999px;

      padding: 8px 18px;
      font-weight: 600;

      transition: all .25s ease;
    }

    .nav-btn:hover {
      background: linear-gradient(
        135deg,
        var(--accent),
        var(--accent2)
      );
      color: white;
      box-shadow: 0 0 18px rgba(99,102,241,.35);
      transform: translateY(-1px);
    }

    .theme-btn {
      justify-self: end;

      background: var(--bg);
      color: var(--text);

      border: 1px solid var(--border);
      border-radius: 12px;

      padding: 8px 14px;
      transition: all .25s ease;
    }

    .theme-btn:hover {
      box-shadow: 0 0 14px rgba(168,85,247,.35);
    }

    .header {
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: white;
      padding: 40px 0;
      font-size: 42px;
      font-weight: 700;
      letter-spacing: .5px;
      text-align: center;
    }

    .section {
      background: var(--card);
      border: 1px solid var(--border);

      width: 1000px;
      margin: 24px auto;
      padding: 22px;

      border-radius: 18px;

      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;

      transition: all .28s ease;

      box-shadow:
        0 10px 20px rgba(0,0,0,.06),
        0 0 0 1px rgba(255,255,255,.4) inset;
    }

    .dark .section {
      box-shadow:
        0 10px 20px rgba(0,0,0,.25),
        0 0 0 1px rgba(255,255,255,.05) inset;
    }

    .section:hover {
      box-shadow:
          0 0 0 1px var(--accent),
          0 0 20px rgba(99,102,241,.25),
          0 15px 30px rgba(0,0,0,.12);

      transform: translateY(-2px);
    }

    button {
      background: var(--btn-bg);
      color: white;

      border: none;
      border-radius: 12px;
      padding: 10px 16px;
      margin: 6px;

      font-weight: 600;
      letter-spacing: .3px;

      cursor: pointer;
      font-family: 'Outfit';
      transition: .2s;
    }

    button:hover {
      background: var(--secondary);
      transform: translateY(-1px);
      box-shadow: 0 0 14px rgba(236,72,153,.35);
    }

    .scale-row {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 10px 0;
    }

    img, video {
      display: block;
      margin: 10px auto;
    }

    #status {
      position: fixed;
      top: 80px;
      right: 20px;

      background: var(--surface);
      color: var(--success);
      border: 1px solid var(--border);

      padding: 10px 14px;
      border-radius: 12px;

      backdrop-filter: blur(6px);
      z-index: 2000;

      transition: all .3s ease;

      opacity: 1;
      pointer-events: auto;
    }

    body, .section, .top-bar, button, .header {
      transition:
          background .35s ease,
          color .25s ease,
          border .25s ease,
          box-shadow .3s ease;
    }

    @media (max-width: 1000px) {
    .section {
        width: 92%;
        padding: 16px;
    }

    img, video {
        max-width: 100%;
    }

    .header {
        font-size: 32px;
        padding: 28px 10px;
    }

    .scale-row {
        flex-wrap: wrap;
    }

    button {
        padding: 8px 12px;
        font-size: 14px;
    }
    }

.nav-btn.active {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: white;

  box-shadow:
    0 0 6px var(--primary),
    0 0 12px var(--secondary),
    0 0 20px rgba(236,72,153,.4);

  animation: neonPulse 2s infinite alternate;
}

@keyframes neonPulse {
  from {
    box-shadow:
      0 0 6px var(--primary),
      0 0 12px var(--secondary);
  }
  to {
    box-shadow:
      0 0 10px var(--primary),
      0 0 18px var(--secondary),
      0 0 26px rgba(236,72,153,.5);
  }
}

  #backGuide {
    position: fixed;
    bottom: 24px;
    right: 24px;

    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;

    border: none;
    border-radius: 14px;

    padding: 12px 16px;
    font-weight: 600;

    cursor: pointer;

    opacity: 0;
    pointer-events: none;

    transition: all .3s ease;

    box-shadow:
      0 0 10px rgba(99,102,241,.4),
      0 0 20px rgba(236,72,153,.3);
  }

  #backGuide.show {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
  }

  #backGuide:hover {
    transform: translateY(-3px) scale(1.05);
  }

  .nav-btn:hover {
    animation: iconWiggle .4s ease;
  }

  @keyframes iconWiggle {
    0% { transform: rotate(0); }
    25% { transform: rotate(-6deg); }
    50% { transform: rotate(6deg); }
    100% { transform: rotate(0); }
  }

  .paper-wrapper {
    position: relative;
    height: 160px;
    perspective: 900px;
  }

  .paper {
    position: absolute;
    inset: 0;

    display: flex;
    align-items: center;
    justify-content: center;

    font-size: 26px;
    font-weight: 600;
    text-align: center;

    opacity: 0;
    transition: all .8s ease;

    color: var(--text);
    background: none;
    -webkit-text-fill-color: unset;

    text-shadow: 
      0 0 6px rgba(99,102,241,.35),
      0 0 12px rgba(236,72,153,.25);
  }

    .paper.active {
      opacity: 1;
      transform: rotateY(0) translateX(0) scale(1);
    }

    @keyframes glow {
      from {
        filter: drop-shadow(0 0 6px rgba(192,132,252,.4));
      }
      to {
        filter: drop-shadow(0 0 14px rgba(244,114,182,.7));
      }
    }

    .steps div:nth-child(1) {
    background: linear-gradient(135deg, #60a5fa22, #3b82f622);
    border-color: #60a5fa55;
    }

  .steps div:nth-child(2) {
    background: linear-gradient(135deg, #34d39922, #10b98122);
    border-color: #34d39955;
  }

  .steps div:nth-child(3) {
    background: linear-gradient(135deg, #fbbf2422, #f59e0b22);
    border-color: #fbbf2455;
  }

  .steps div:nth-child(4) {
    background: linear-gradient(135deg, #f472b622, #ec489922);
    border-color: #f472b655;
  }

  .steps div:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 12px rgba(99,102,241,.2);
  }

  .dark .paper {
  color: #e6ebff;
  text-shadow: 
    0 0 8px rgba(129,140,248,.6),
    0 0 14px rgba(244,114,182,.4);
}
</style>
</head>

<body>

<div class="top-bar">
  <div class="top-spacer"></div>

  <div class="nav-center">
    <button id="btnGuide" class="nav-btn" onclick="scrollToId('guideSection')">ðŸ“– Guide</button>
    <button id="btnImage" class="nav-btn" onclick="scrollToId('imageSection')">ðŸ–¼ Image</button>
    <button id="btnVideo" class="nav-btn" onclick="scrollToId('videoSection')">ðŸŽ¬ Video</button>
  </div>

  <button class="theme-btn" onclick="toggleTheme()" id="themeBtn">
    ðŸŒ™ Dark
  </button>
</div>

<div class="header">
  <div class="paper-wrapper" id="paperBox">

    <div class="paper active">
      AI Image Upscaler â€“ A product by "ChÃºng tÃ´i Ä‘Æ¡n giáº£n lÃ  SVBK"
    </div>

    <div class="paper">
      72% users upscale old photos for social media
    </div>

    <div class="paper">
      Best choice: 2x for portraits â€“ 4x for text
    </div>

    <div class="paper">
      Sharper resolution = more professional look
    </div>

  </div>
</div>

<div class="guide" id="guideSection">
  <h2>What would you like to upscale?</h2>

  <div class="guide-actions">
    <div class="guide-card" onclick="scrollToId('imageSection')">
      ðŸ–¼ <span>Upscale Image</span>
      <p>Enhance photos, artworks, screenshots up to 4x quality</p>
    </div>

    <div class="guide-card" onclick="scrollToId('videoSection')">
      ðŸŽ¬ <span>Upscale Video</span>
      <p>Improve resolution of MP4/MOV videos with AI</p>
    </div>
  </div>

  <div class="steps">
    <div>1. Choose Image or Video</div>
    <div>2. Upload your file</div>
    <div>3. Select Upscale 2x / 3x / 4x</div>
    <div>4. Download result</div>
  </div>
</div>
    
<p style="text-align:center">
Professional AI-powered image enhancement
</p>

<div class="section" id="imageSection">
<h2>ðŸ–¼ Image Upscale</h2>

<input type="file" id="file" accept="image/*">

<div class="scale-row">
  <button onclick="uploadImg('/api/upscale2x')">Upscale 2x</button>
  <button onclick="uploadImg('/api/upscale3x')">Upscale 3x</button>
  <button onclick="uploadImg('/api/upscale4x')">Upscale 4x</button>
</div>

<p id="status" style="display:none"></p>

<img id="result" style="max-width:800px;height:auto;">

<br>
<a id="downloadLink" href="#">
  <button>Download Image</button>
</a>
</div>

<div class="section" id="videoSection">

<h2>ðŸŽ¬ Video Upscale</h2>

<input type="file" id="video2" accept="video/*">

<div class="scale-row">
  <button onclick="uploadVideo('/api/upscaleVideo2x')">Upscale 2x</button>
  <button onclick="uploadVideo('/api/upscaleVideo3x')">Upscale 3x</button>
  <button onclick="uploadVideo('/api/upscaleVideo4x')">Upscale 4x</button>
</div>

<video id="videoResult" style="max-width:800px;height:auto;" controls></video>

<br>
<a id="downloadLinkVideo" href="#">
  <button>Download Video</button>
</a>

</div>

<script>
function scrollToId(id){
  const el = document.getElementById(id);

  const topBarHeight =
    document.querySelector(".top-bar").offsetHeight || 70;

  const y =
    el.getBoundingClientRect().top +
    window.pageYOffset -
    topBarHeight -
    10;

  window.scrollTo({
    top: y,
    behavior: "smooth"
  });
}

document.getElementById("file").addEventListener("change", function(){
  const st = document.getElementById("status");
  const file = this.files[0];

  if (!file.type.startsWith("image/")) {
    st.innerText = "âš  Only image files are allowed in Image section";
    st.style.color = "#f87171";
    this.value = "";
    return;
  }

  st.innerText = "ðŸ“Œ Image selected â€“ please choose Upscale 2x / 3x / 4x";
  st.style.color = "#60a5fa";
});

document.getElementById("video2").addEventListener("change", function(){
  const st = document.getElementById("status");

  const file = this.files[0];

  if (!file.type.startsWith("video/")) {
    st.innerText = "âš  Only video files are allowed in Video section";
    st.style.color = "#f87171";
    this.value = "";
    return;
  }

  st.innerText = "ðŸ“Œ Video selected â€“ please choose Upscale 2x / 3x / 4x";
  st.style.color = "#60a5fa";
});

async function uploadImg(url){
 let start = performance.now();

 const f = document.getElementById("file");
 const st = document.getElementById("status");
 const img = document.getElementById("result");
 const link = document.getElementById("downloadLink");

 if(!f.files.length){
   st.style.display = "block";
   st.innerText = "âš  Please select an image first";
   st.style.color = "#f87171";
   return;
 }

 if(!f.files[0].type.startsWith("image/")){
  st.innerText = "âš  Invalid file type â€“ only image allowed";
  st.style.color = "#f87171";
  return;
}

 st.style.display = "block";
 st.innerText="â³ Uploading...";
 st.style.color="#4ade80";

 let fd=new FormData();
 fd.append("file",f.files[0]);

 const res=await fetch(url,{method:"POST",body:fd});
 const {uid}=await res.json();

 st.innerText="âš™ï¸ Processing...";

 const t=setInterval(async()=>{
   const r=await fetch(`/api/image_status/${uid}`);
   const s=await r.json();

   if(s.status==="done"){
     clearInterval(t);

     const u=s.result+"?t="+Date.now();
     img.src=u;

     img.onload=()=>{
       st.innerText=
         `âœ… Done in ${((performance.now()-start)/1000).toFixed(2)}s`;
     };

     link.href=u;
     link.download="upscaled.png";
   }
 },3000);
}

async function uploadVideo(url){
 let start=performance.now();

 const f=document.getElementById("video2");
 const v=document.getElementById("videoResult");
 const st=document.getElementById("status");
 const link=document.getElementById("downloadLinkVideo");

 if(!f.files.length){
   st.style.display = "block";
   st.innerText = "âš  Please select a video first";
   st.style.color = "#f87171";
   return;
 }

 if(!f.files[0].type.startsWith("video/")){
  st.innerText = "âš  Invalid file type â€“ only video allowed";
  st.style.color = "#f87171";
  return;
}

 v.src=""; 
 v.load();

 let fd=new FormData();
 fd.append("file",f.files[0]);

 st.style.display = "block";
 st.innerText="â³ Uploading...";
 st.style.color="#4ade80";

 const res=await fetch(url,{method:"POST",body:fd});
 const {task_id}=await res.json();

 st.innerText="âš™ï¸ Processing...";

 const t=setInterval(async()=>{
   const r=await fetch(`/api/video_status/${task_id}`);
   const s=await r.json();

   if(s.status==="done"){
     clearInterval(t);

     const u=`/api/download/${task_id}?t=${Date.now()}`;
     v.src=u;

     v.onloadeddata=()=>{
       st.innerText=
         `âœ… Done in ${((performance.now()-start)/1000).toFixed(2)}s`;
     };

     link.href=u;
     link.download="upscaled.mp4";
   }
 },3000);
}

function toggleTheme(){
 document.body.classList.toggle("dark");
 const b=document.getElementById("themeBtn");

 const d=document.body.classList.contains("dark");
 b.innerText=d?"â˜€ Light":"ðŸŒ™ Dark";
 localStorage.setItem("theme",d?"dark":"light");
}

window.onload=()=>{
 if(localStorage.getItem("theme")==="dark"){
    document.body.classList.add("dark");
    document.getElementById("themeBtn").innerText="â˜€ Light";
 }
};

const sections = {
  guideSection: document.getElementById("btnGuide"),
  imageSection: document.getElementById("btnImage"),
  videoSection: document.getElementById("btnVideo")
};

const observer = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      Object.values(sections).forEach(b => b.classList.remove("active"));

      const btn = sections[e.target.id];
      if (btn) btn.classList.add("active");
    }
  });
}, {
  threshold: 0.08,
  rootMargin: "-80px 0px -45% 0px"
});

observer.observe(document.getElementById("guideSection"));
observer.observe(document.getElementById("imageSection"));
observer.observe(document.getElementById("videoSection"));

let back;

window.addEventListener("DOMContentLoaded", () => {
  back = document.getElementById("backGuide");
});

window.addEventListener("scroll", () => {
  const y = window.scrollY;

  if (y > 420) {
    back.classList.add("show");
  } else {
    back.classList.remove("show");
  }
});

let paperIndex = 0;
let paperTimer;

function startPaper(){
  const papers =
    document.querySelectorAll(".paper");

  paperTimer = setInterval(() => {

    papers[paperIndex]
      .classList.remove("active");

    paperIndex =
      (paperIndex + 1) % papers.length;

    papers[paperIndex]
      .classList.add("active");

  }, 5000);
}

window.addEventListener("DOMContentLoaded", startPaper);

["file","video2"].forEach(id=>{
  document.getElementById(id)
  .addEventListener("change",()=>{
    clearInterval(paperTimer);
  });
});
</script>

<button id="backGuide" onclick="scrollToId('guideSection')">
  â†‘ Back to Guide
</button>

</body>
</html>
