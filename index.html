<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>RealCUGAN Image Upscaler</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="bg-video-wrapper">
        <video class="bg-video" autoplay muted loop playsinline>
            <source src="C:\Users\DELL\Downloads\mixkit-stars-in-space-background-1610-4k.mp4" type="video/mp4">
        </video>
    </div>

    <main class="app">
        <header class="header">
            <h1>RealCUGAN Image Upscaler</h1>
            <p>Professional AI-powered image enhancement</p>
        </header>

        <section class="panel">
            <label class="file-label">
                <span id="fileText">Select an image</span>
                <input type="file" id="file" accept="image/*" onchange="previewImage()">
            </label>

            <div id="preview" class="preview hidden"></div>

            <button id="upscaleBtn" onclick="upload()" disabled>
                Upscale Image
            </button>

            <div id="result"></div>
        </section>
    </main>

    <script>
        function previewImage() {
            const fileInput = document.getElementById("file");
            const preview = document.getElementById("preview");
            const fileText = document.getElementById("fileText");
            const button = document.getElementById("upscaleBtn");

            const file = fileInput.files[0];
            if (!file) return;

            fileText.textContent = file.name;
            button.disabled = false;

            const reader = new FileReader();
            reader.onload = () => {
                preview.innerHTML = `<img src="${reader.result}" alt="Preview">`;
                preview.classList.remove("hidden");
            };
            reader.readAsDataURL(file);
        }

        async function upload() {
            const fileInput = document.getElementById("file");
            const formData = new FormData();
            formData.append("file", fileInput.files[0]);

            document.getElementById("result").innerHTML =
                `<p class="status loading">Upscaling imageâ€¦</p>`;

            const res = await fetch("/api/upscale", {
                method: "POST",
                body: formData
            });

            const data = await res.json();
            document.getElementById("result").innerHTML =
                `<img class="fade-in" src="${data.result}" alt="Upscaled result">`;
        }
    </script>
</body>
</html>
