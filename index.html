<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>AI Upscaler</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    .guide {
    text-align: center;
    margin: 20px auto;
    max-width: 1000px;
    }

    .guide h2 {
    margin-bottom: 12px;
    }

    .guide-actions {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 20px 0;
    }

    .guide-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 18px;
    width: 300px;

    cursor: pointer;
    transition: all .3s ease;
    }

    .guide-card span {
    display: block;
    font-size: 20px;
    font-weight: 600;
    margin-top: 6px;
    }

    .guide-card p {
    opacity: .8;
    font-size: 14px;
    }

    /* glow khi hover */
    .guide-card:hover {
    box-shadow:
        0 0 0 1px var(--accent),
        0 0 20px rgba(99,102,241,.25);

    transform: translateY(-2px);
    }

    .steps {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;

    margin-top: 12px;
    }

    .steps div {
    background: var(--card);
    border: 1px solid var(--border);
    padding: 8px 12px;
    border-radius: 10px;
    font-size: 13px;
    }

    @media (max-width: 1000px) {
    .guide-actions {
        flex-direction: column;
        align-items: center;
    }

    .guide-card {
        width: 92%;
    }
    }

    .app {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    }

    input[type="file"] {
    text-align: center;
    margin: 10px auto;
    }

    a {
    display: flex;
    justify-content: center;
    }

    :root {
    --bg: #f0f4ff;
    --card: #ffffff;
    --text: #1e293b;
    --accent: #6366f1;
    --accent2: #a855f7;
    --border: #e0e7ff;
    }

    .dark {
    --bg: #0b1120;
    --card: #111827;
    --text: #e2e8ff;
    --accent: #818cf8;
    --accent2: #c084fc;
    --border: #1f2937;
    }

    * { box-sizing: border-box; }

    body {
    font-family: 'Outfit', Arial;
    background: var(--bg);
    color: var(--text);
    margin: 0;
    transition: .3s;
    }

    .top-bar {
    display: flex;
    justify-content: space-between;
    padding: 12px 20px;
    background: var(--card);
    border-bottom: 1px solid var(--border);
    }

    .header {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: white;
    padding: 40px 0;
    font-size: 42px;
    font-weight: 700;
    letter-spacing: .5px;
    text-align: center;
    }

    .section {
    margin: 30px auto;
    width: 1000px;

    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;

    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 24px;

    box-shadow: 0 10px 20px rgba(0,0,0,.08);
    transition: all .3s ease;
    }

    .section:hover {
    box-shadow:
        0 0 0 1px var(--accent),
        0 0 20px rgba(99,102,241,.25),
        0 15px 30px rgba(0,0,0,.12);

    transform: translateY(-2px);
    }

    button {
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 10px 16px;
    margin: 6px;
    cursor: pointer;
    font-family: 'Outfit';
    transition: .2s;
    }

    button:hover {
    transform: translateY(-1px);
    opacity: .9;
    }

    .scale-row {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin: 10px 0;
    }

    img, video {
    display: block;
    margin: 10px auto;
    }

    #status {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #000;
    color: #4ade80;
    padding: 10px 14px;
    border-radius: 12px;
    }

    body, .section, .top-bar, button, .header {
    transition:
        background .35s ease,
        color .25s ease,
        border .25s ease,
        box-shadow .3s ease;
    }

    @media (max-width: 1000px) {
    .section {
        width: 92%;
        padding: 16px;
    }

    img, video {
        max-width: 100%;
    }

    .header {
        font-size: 32px;
        padding: 28px 10px;
    }

    .scale-row {
        flex-wrap: wrap;
    }

    button {
        padding: 8px 12px;
        font-size: 14px;
    }
    }
</style>
</head>

<body>

<div class="top-bar">
  <div>
    <button onclick="scrollToId('imageSection')">ðŸ–¼ Image</button>
    <button onclick="scrollToId('videoSection')">ðŸŽ¬ Video</button>
  </div>

  <button onclick="toggleTheme()" id="themeBtn">ðŸŒ™ Dark</button>
</div>


<div class="header">AI Image Upscaler</div>

<div class="guide">
  <h2>What would you like to upscale?</h2>

  <div class="guide-actions">
    <div class="guide-card" onclick="scrollToId('imageSection')">
      ðŸ–¼ <span>Upscale Image</span>
      <p>Enhance photos, artworks, screenshots up to 4x quality</p>
    </div>

    <div class="guide-card" onclick="scrollToId('videoSection')">
      ðŸŽ¬ <span>Upscale Video</span>
      <p>Improve resolution of MP4/MOV videos with AI</p>
    </div>
  </div>

  <div class="steps">
    <div>1. Choose Image or Video</div>
    <div>2. Upload your file</div>
    <div>3. Select Upscale 2x / 3x / 4x</div>
    <div>4. Download result</div>
  </div>
</div>
    
<p style="text-align:center">
Professional AI-powered image enhancement
</p>

<div class="section" id="imageSection">
<h2>ðŸ–¼ Image Upscale</h2>

<input type="file" id="file">

<div class="scale-row">
  <button onclick="uploadImg('/api/upscale2x')">Upscale 2x</button>
  <button onclick="uploadImg('/api/upscale3x')">Upscale 3x</button>
  <button onclick="uploadImg('/api/upscale4x')">Upscale 4x</button>
</div>

<p id="status"></p>

<img id="result" style="max-width:800px;height:auto;">

<br>
<a id="downloadLink" href="#">
  <button>Download Image</button>
</a>
</div>

<div class="section" id="videoSection">

<h2>ðŸŽ¬ Video Upscale</h2>

<input type="file" id="video2">

<div class="scale-row">
  <button onclick="uploadVideo('/api/upscaleVideo2x')">Upscale 2x</button>
  <button onclick="uploadVideo('/api/upscaleVideo3x')">Upscale 3x</button>
  <button onclick="uploadVideo('/api/upscaleVideo4x')">Upscale 4x</button>
</div>

<video id="videoResult" style="max-width:800px;height:auto;" controls></video>

<br>
<a id="downloadLinkVideo" href="#">
  <button>Download Video</button>
</a>

</div>

<script>
function scrollToId(id){
 document.getElementById(id)
 .scrollIntoView({behavior:"smooth"});
}

async function uploadImg(url){
 let start = performance.now();

 const f = document.getElementById("file");
 const st = document.getElementById("status");
 const img = document.getElementById("result");
 const link = document.getElementById("downloadLink");

 if(!f.files.length){
   alert("Please choose image");
   return;
 }

 st.innerText="â³ Uploading...";

 let fd=new FormData();
 fd.append("file",f.files[0]);

 const res=await fetch(url,{method:"POST",body:fd});
 const {uid}=await res.json();

 st.innerText="âš™ï¸ Processing...";

 const t=setInterval(async()=>{
   const r=await fetch(`/api/image_status/${uid}`);
   const s=await r.json();

   if(s.status==="done"){
     clearInterval(t);

     const u=s.result+"?t="+Date.now();
     img.src=u;

     img.onload=()=>{
       st.innerText=`âœ… Done in ${((performance.now()-start)/1000).toFixed(2)}s`;
     };

     link.href=u;
     link.download="upscaled.png";
   }
 },3000);
}

async function uploadVideo(url){
 let start=performance.now();

 const f=document.getElementById("video2");
 const v=document.getElementById("videoResult");
 const st=document.getElementById("status");
 const link=document.getElementById("downloadLinkVideo");

 if(!f.files.length){
   alert("Please choose video");
   return;
 }

 v.src=""; v.load();

 let fd=new FormData();
 fd.append("file",f.files[0]);

 st.innerText="â³ Uploading...";

 const res=await fetch(url,{method:"POST",body:fd});
 const {task_id}=await res.json();

 st.innerText="âš™ï¸ Processing...";

 const t=setInterval(async()=>{
   const r=await fetch(`/api/video_status/${task_id}`);
   const s=await r.json();

   if(s.status==="done"){
     clearInterval(t);

     const u=`/api/download/${task_id}?t=${Date.now()}`;
     v.src=u;

     v.onloadeddata=()=>{
       st.innerText=`âœ… Done in ${((performance.now()-start)/1000).toFixed(2)}s`;
     };

     link.href=u;
     link.download="upscaled.mp4";
   }
 },3000);
}

function toggleTheme(){
 document.body.classList.toggle("dark");
 const b=document.getElementById("themeBtn");

 const d=document.body.classList.contains("dark");
 b.innerText=d?"â˜€ Light":"ðŸŒ™ Dark";
 localStorage.setItem("theme",d?"dark":"light");
}

window.onload=()=>{
 if(localStorage.getItem("theme")==="dark"){
    document.body.classList.add("dark");
    document.getElementById("themeBtn").innerText="â˜€ Light";
 }
};
</script>

</body>
</html>
